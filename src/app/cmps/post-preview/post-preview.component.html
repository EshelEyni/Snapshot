<article class="post-preview" *ngIf="loggedinUser">
    <div class="main-screen" [class.dark-mode]="isMainScreen.isDark" *ngIf="isMainScreen.isShown"
        (click)="onToggleModal('main-screen')">
    </div>
    <section class="post-creator">
        <user-preview [user]="post.by" [location]="post.location"></user-preview>
        <ellipsis></ellipsis>
    </section>

    <img-container [imgUrls]="post.imgUrls"></img-container>

    <post-actions [post]="post" [loggedinUser]="loggedinUser" (toggleModal)="onToggleModal('share')"></post-actions>
    <share-modal *ngIf="isShareModalShown" (close)="onToggleModal('share')"></share-modal>

    <p class="likes">{{post.likedBy.length}} likes</p>

    <a class="view-all-link" *ngIf="post.commentsIds.length">View all {{post.commentsIds.length}} comments</a>
    <!--  TODO: add link to post details -->
    <comment-list *ngIf="post.commentsIds.length" [commentsIds]="post.commentsIds" [isPostPreview]="true" [loggedinUser]="loggedinUser"></comment-list>

    <p class="date-added" [routerLink]="['/post', post.id]">{{post.createdAt|formattedDate}}</p>
    <hr>

    <form class="comment-form" (submit)="onAddComment()">
        <fa-icon (click)="onToggleModal('emoji')" [icon]="faFaceSmile">Post</fa-icon>
        <div class="emoji-picker-container">
            <emoji-mart [style]="{position:'relative'}" *ngIf="isEmojiPickerShown" (emojiClick)="onAddEmoji($event)">
            </emoji-mart>
        </div>
        <input class="txt-input" type="text" placeholder="Add a comment..." [(ngModel)]="commentTxt" name="commentTxt">
        <button class="clean-btn" [class.txt-in-input]="commentTxt" [class.z-index-20]="isEmojiPickerShown"
            type="submit">post</button>
    </form>

</article>